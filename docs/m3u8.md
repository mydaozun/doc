# m3u8下载合并视频

# 一、下载python

https://python.org/

# 二、利用python自带http.server搭建本地服务器

```python
from http.server import SimpleHTTPRequestHandler
from http.server import CGIHTTPRequestHandler
from http.server import ThreadingHTTPServer
from functools import partial
import contextlib
import sys
import os
import socket  # 需补上缺失的 socket 模块导入


class DualStackServer(ThreadingHTTPServer):
    def server_bind(self):
        with contextlib.suppress(Exception):
            self.socket.setsockopt(socket.IPPROTO_IPV6, socket.IPV6_V6ONLY, 0)
        return super().server_bind()


def run(
    server_class=DualStackServer,
    handler_class=SimpleHTTPRequestHandler,
    port=8000,
    bind="127.0.0.1",
    cgi=False,
    directory=os.getcwd(),  # 默认目录已改为用户指定路径
):
    if cgi:
        handler_class = partial(CGIHTTPRequestHandler, directory=directory)
    else:
        handler_class = partial(SimpleHTTPRequestHandler, directory=directory)

    with server_class((bind, port), handler_class) as httpd:
        print(f"Serving HTTP on {bind} port {port} (http://{bind}:{port}/) ...")
        try:
            httpd.serve_forever()
        except KeyboardInterrupt:
            print("\nKeyboard interrupt received, exiting.")
            sys.exit(0)


if __name__ == "__main__":
    # 指定目标目录（注意 Windows 路径需转义或使用原始字符串）
    run(
        port=8000,
        bind="127.0.0.1",
        directory=r"C:\Users\daozun\Desktop\11608",  # 关键修改点
    )
```

# 三、下载M3U8合并器

[N_m3u8DL-CLI_v3.0.2_with_ffmpeg_and_SimpleG.zip](https://github.com/nilaoda/N_m3u8DL-CLI/releases/download/3.0.2/N_m3u8DL-CLI_v3.0.2_with_ffmpeg_and_SimpleG.zip)

# 四、修改index.m3u8配置文件

![image](assets/image-20250402164443-8mo6gcq.png)

# 五、修改软件配置文件

![image](assets/image-20250402164646-q4efa5g.png)
